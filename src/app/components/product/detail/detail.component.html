<section class="product-detail" *ngIf="vehicleData">
  <div class="container-fluid " style="height: auto;">
    <div class="product-header mb-4">
      <h3 *ngIf="
          vehicleData.bodytype_data && vehicleData.bodytype_data.length > 0
        " class="size22 redhat-semibold text-uppercase mb-2">
        {{ vehicleData.bodytype_data[0].name }}
      </h3>
      <h1 class="size46 performa-light mb-4">
        {{ vehicleData.name }}
      </h1>
    </div>
    
     <div class="container-fluid gallery-height">
      <div class="row h-100">
        <div class="col-xl-9 col-lg-12 mb-xl-0 mb-3 pad-right h-100">
          <div class="main-image-wrapper position-relative">
            <img
              [src]="mainImage.src"
              [alt]="mainImage.alt"
              class="img-fluid h-100"
              loading="lazy"
            />
            <button
              class="position-absolute top-50 translate-middle-y prev"
              (click)="prevImage()"
            >
              <img
                src="{{ imageURL }}/product-details/left-arrow.svg"
                alt="Previous"
              />
            </button>
            <button
              class="position-absolute top-50 translate-middle-y next"
              (click)="nextImage()"
            >
              <img
                src="{{ imageURL }}/product-details/right-arrow.svg"
                alt="Next"
                class="arrows"
              />
            </button>
          </div>
        </div>

        <div class="col-xl-3 col-lg-12 pad-left h-100">
          <div class="d-flex flex-xl-column gap-xl-4 gap-lg-3 gap-3 thumbnail-height">
            <div
              *ngFor="let img of thumbnailImages.images; let i = index"
              class="thumbnail-item"
              [class.active]="i === 0"
              (click)="selectImage((currentIndex + i) % images.length)"
            >
              <img [src]="img.src" [alt]="img.alt" loading="lazy" />
              <div *ngIf="img.showCount" class="remaining-count-overlay">
                +{{ img.count }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div> 
    

    <!-- <div class="gallery-height d-grid">
      <div class="main-image-wrapper position-relative">
        <img [src]="mainImage.src" [alt]="mainImage.alt" class="img-fluid h-100" loading="lazy" />
        <button class="position-absolute top-50 translate-middle-y prev" (click)="prevImage()">
          <img src="{{ imageURL }}/product-details/left-arrow.svg" alt="Previous" />
        </button>
        <button class="position-absolute top-50 translate-middle-y next" (click)="nextImage()">
          <img src="{{ imageURL }}/product-details/right-arrow.svg" alt="Next" class="arrows" />
        </button>
      </div>
      <div class="sub d-flex w-100 mt-3">
        <div class="d-flex flex-xl-column h-100 gap-xl-4 gap-lg-3">
          <div *ngFor="let img of thumbnailImages.images; let i = index" class="thumbnail-item" [class.active]="i === 0"
            (click)="selectImage((currentIndex + i) % images.length)">
            <img [src]="img.src" [alt]="img.alt" loading="lazy" />
            <div *ngIf="img.showCount" class="remaining-count-overlay">
              +{{ img.count }}
            </div>
          </div>
        </div>
      </div>
    </div> -->

  </div>
</section>

<section class="details" *ngIf="vehicleData">
  <div class="container-fluid">
    <div class="row sticky-container" #stickyContainer>
      <div #stickyCard class="sticky-card d-xl-block d-none border border-1 border-black p-3 rounded-4">
        <div class="d-flex align-items-end mb-4 justify-content-between">
          <img src="{{ thumbnailImage }}" alt="" class="sticky_image rounded-4" />
          <div class="cash">
            <h6 class="text-muted mb-0 size18 redhat-semibold text-decoration-line-through"
              *ngIf="vehicleData && vehicleData.regularRate">
              AED {{ vehicleData.regularRate }}
            </h6>
            <h5 class="mb-0 size26 redhat-semibold" *ngIf="vehicleData && vehicleData.rentalType == 'Daily'">
              AED {{ vehicleData.dailyRate }}
            </h5>
            <h5 class="mb-0 size26 redhat-semibold" *ngIf="vehicleData && vehicleData.rentalType == 'Hourly'">
              AED {{ vehicleData.hourlyRate }}
            </h5>
            <h5 class="mb-0 size26 redhat-semibold" *ngIf="vehicleData && vehicleData.rentalType == 'Weekly'">
              AED {{ vehicleData.weeklyRate }}
            </h5>
            <h5 class="mb-0 size26 redhat-semibold" *ngIf="vehicleData && vehicleData.rentalType == 'Monthly'">
              AED {{ vehicleData.monthlyRate }}
            </h5>
          </div>
        </div>

        <h4 class="size26 redhat-semibold m-0">{{ vehicleData.name }}</h4>
        <p class="size18 redhat-semibold mb-2">{{ vehicleData.bodytype_data[0].name }}</p>

        <div class="d-flex justify-content-between mb-4">
          <div class="d-flex align-items-center">
            <img src="{{ imageURL }}/product-details/overview_icons/location.png" alt=""
              class="sticky-card-icons me-1" />
            <p class="size14 redhat-regular m-0">get directions</p>
          </div>
          <div class="d-flex align-items-center">
            <img src="{{ imageURL }}/product-details/overview_icons/call.png" alt="" class="sticky-card-icons me-1" />
            <p class="size14 redhat-regular m-0">+971 800 44678</p>
          </div>
        </div>
        <div class="btns">
          <div class="w-100 bg-black border border-1 rounded-3 mb-3 p-3 text-center" *ngIf="vehicleData">
            <a [routerLink]="['/contact/product', vehicleData.name]"
              class="size18 redhat-semibold text-decoration-none white-color text-capitalize">
              send a mail
            </a>
          </div>
          <div class="w-100 bg-white rounded-3 p-3 green-border-color text-center">
            <a href="https://wa.me/971555555555"
              class="size18 redhat-semibold green-color text-decoration-none text-capitalize">
              book via whatsapp
            </a>
          </div>
        </div>
      </div>
      <div class="d-xl-none d-block purchase-card mb-5 border border-1 border-black p-md-3 p-2 rounded-4">
        <div class="d-flex align-items-end mb-2 mb-md-4 justify-content-md-between gap-3 gap-md-0">
          <img src="{{ thumbnailImage }}" alt="" class="sticky_image rounded-4" />
          <div class="cash">
            <h6 class="text-muted mb-0 size18 redhat-semibold text-decoration-line-through"
              *ngIf="vehicleData && vehicleData.regularRate">
              AED {{ vehicleData.regularRate }}
            </h6>
            <h5 class="mb-0 size26 redhat-semibold" *ngIf="vehicleData && vehicleData.rentalType == 'Daily'">
              AED {{ vehicleData.dailyRate }}
            </h5>
            <h5 class="mb-0 size26 redhat-semibold" *ngIf="vehicleData && vehicleData.rentalType == 'Hourly'">
              AED {{ vehicleData.hourlyRate }}
            </h5>
            <h5 class="mb-0 size26 redhat-semibold" *ngIf="vehicleData && vehicleData.rentalType == 'Weekly'">
              AED {{ vehicleData.weeklyRate }}
            </h5>
            <h5 class="mb-0 size26 redhat-semibold" *ngIf="vehicleData && vehicleData.rentalType == 'Monthly'">
              AED {{ vehicleData.monthlyRate }}
            </h5>
          </div>
        </div>

        <h4 class="size26 redhat-semibold m-0">{{ vehicleData.name }}</h4>
        <p class="size18 redhat-semibold mb-2">{{ vehicleData.bodytype_data[0].name }}</p>

        <div class="d-flex justify-content-between mb-4">
          <div class="d-flex align-items-center">
            <img src="{{ imageURL }}/product-details/overview_icons/location.png" alt=""
              class="sticky-card-icons me-1" />
            <p class="size14 redhat-regular m-0">get directions</p>
          </div>
          <div class="d-flex align-items-center justify-content-center">
            <img src="{{ imageURL }}/product-details/overview_icons/call.png" alt="" class="sticky-card-icons me-1" />
            <p class="size14 redhat-regular m-0">+971 800 44678</p>
          </div>
        </div>
        <div class="btns">
          <div
            class="w-100 bg-black border border-1 rounded-3 mb-3 p-2 p-md-3 text-center d-flex justify-content-center align-items-center"
            *ngIf="vehicleData">
            <a [routerLink]="['/contact/product', vehicleData.name]"
              class="size18 redhat-semibold text-decoration-none white-color text-capitalize">
              send a mail
            </a>
          </div>
          <div
            class="w-100 bg-white rounded-3 p-2 p-md-3 green-border-color text-center d-flex justify-content-center align-items-center">
            <a href="https://wa.me/971555555555"
              class="size18 redhat-semibold green-color text-decoration-none text-capitalize">
              book via whatsapp
            </a>
          </div>
        </div>
      </div>

      <div class="col-xl-9 col-12 border-1 border-bottom section-width">
        <div class="mb-3 mb-md-5">
          <h3 class="size26 redhat-semibold text-capitalize mb-xl-5 mb-lg-4 mb-md-4 mb-4">
            {{vehicleData.vehicle_type}} overview
          </h3>

          <div class="row">
            <div class="col-lg-4 col-md-4 col-12 mb-xl-3 mb-lg-2 mb-3" *ngFor="let detail of carDetails.flat()">
              <div class="row align-items-center">
                <div class="col-2 p-0">
                  <img [src]="
                      imageURL +
                      '/product-details/overview_icons/' +
                      detail.icon +
                      '.png'
                    " [alt]="detail.label" class="overview_icons" />
                </div>
                <div class="col-4">
                  <h5 class="size14 redhat-semibold text-capitalize mb-0">
                    {{ detail.label }}
                  </h5>
                </div>
                <div class="col-6">
                  <p class="size14 redhat-semibold text-capitalize mb-0">
                    {{ detail.value }}
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-xl-9 col-12 border-1 border-bottom section-width" *ngIf="vehicleData">
        <div class="my-3 my-md-5">
          <h3 class="size26 redhat-semibold text-capitalize mb-xl-5 mb-lg-4 mb-md-4 mb-4">
            description
          </h3>
          <p class="size18 redhat-semibold mb-5" [innerHtml]="vehicleData.description"></p>
        </div>
      </div>

      <div class="col-xl-9 col-12 border-1 border-bottom section-width">
        <div class="my-3 my-md-5">
          <h3 class="size26 redhat-semibold text-capitalize mb-xl-5 mb-lg-4 mb-md-4 mb-4">
            features
          </h3>
          <div class="row">
            <div class="col-xl-3 col-lg-3 col-md-3 col-6">
              <div class="d-flex flex-column">
                <h6 class="size18 redhat-semibold text-capitalize mb-3">
                  Interior
                </h6>
                <ul class="list-unstyled">
                  <li class="d-flex gap-4 align-items-center mb-3" *ngFor="let item of interior">
                    <img src="{{ imageURL }}/product-details/tick_mark.png" alt="" class="features_icons" />
                    <p class="size14 redhat-semibold text-capitalize m-0">
                      {{ item.name }}
                    </p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="col-xl-3 col-lg-3 col-md-3 col-6">
              <div class="d-flex flex-column">
                <h6 class="size18 redhat-semibold text-capitalize mb-3">
                  exterior
                </h6>
                <ul class="list-unstyled">
                  <li class="d-flex gap-4 align-items-center mb-3" *ngFor="let item of exterior">
                    <img src="{{ imageURL }}/product-details/tick_mark.png" alt="" class="features_icons" />
                    <p class="size14 redhat-semibold text-capitalize m-0">
                      {{ item.name }}
                    </p>
                  </li>
                </ul>
              </div>
            </div>

            <div class="col-xl-3 col-lg-3 col-md-3 col-6">
              <div class="d-flex flex-column">
                <h6 class="size18 redhat-semibold text-capitalize mb-3">
                  Safety
                </h6>
                <ul class="list-unstyled">
                  <li class="d-flex gap-4 align-items-center mb-3" *ngFor="let item of safety">
                    <img src="{{ imageURL }}/product-details/tick_mark.png" alt="" class="features_icons" />
                    <p class="size14 redhat-semibold text-capitalize m-0">
                      {{ item.name }}
                    </p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="col-xl-3 col-lg-3 col-md-3 col-6">
              <div class="d-flex flex-column">
                <h6 class="size18 redhat-semibold text-capitalize mb-3">
                  Comfort & Convenience
                </h6>
                <ul class="list-unstyled">
                  <li class="d-flex gap-4 align-items-center mb-3" *ngFor="let item of comfort">
                    <img src="{{ imageURL }}/product-details/tick_mark.png" alt="" class="features_icons" />
                    <p class="size14 redhat-semibold text-capitalize m-0">
                      {{ item.name }}
                    </p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <!-- <div class="d-flex gap-4">
            <div class="d-flex flex-column">
              <h6 class="size18 redhat-semibold text-capitalize mb-3">
                Interior
              </h6>
              <ul class="list-unstyled">
                <li
                  class="d-flex gap-4 align-items-center mb-3"
                  *ngFor="let item of interior"
                >
                  <img
                    src="{{ imageURL }}/product-details/tick_mark.png"
                    alt=""
                    class="features_icons"
                  />
                  <p class="size14 redhat-semibold text-capitalize m-0">
                    {{ item.name }}
                  </p>
                </li>
              </ul>
            </div>
            <div class="d-flex flex-column">
              <h6 class="size18 redhat-semibold text-capitalize mb-3">
                exterior
              </h6>
              <ul class="list-unstyled">
                <li
                  class="d-flex gap-4 align-items-center mb-3"
                  *ngFor="let item of exterior"
                >
                  <img
                    src="{{ imageURL }}/product-details/tick_mark.png"
                    alt=""
                    class="features_icons"
                  />
                  <p class="size14 redhat-semibold text-capitalize m-0">
                    {{ item.name }}
                  </p>
                </li>
              </ul>
            </div>
            <div class="d-flex flex-column">
              <h6 class="size18 redhat-semibold text-capitalize mb-3">
                Safety
              </h6>
              <ul class="list-unstyled">
                <li
                  class="d-flex gap-4 align-items-center mb-3"
                  *ngFor="let item of safety"
                >
                  <img
                    src="{{ imageURL }}/product-details/tick_mark.png"
                    alt=""
                    class="features_icons"
                  />
                  <p class="size14 redhat-semibold text-capitalize m-0">
                    {{ item.name }}
                  </p>
                </li>
              </ul>
            </div>
            <div class="d-flex flex-column">
              <h6 class="size18 redhat-semibold text-capitalize mb-3">
                Comfort & Convenience
              </h6>
              <ul class="list-unstyled">
                <li
                  class="d-flex gap-4 align-items-center mb-3"
                  *ngFor="let item of comfort"
                >
                  <img
                    src="{{ imageURL }}/product-details/tick_mark.png"
                    alt=""
                    class="features_icons"
                  />
                  <p class="size14 redhat-semibold text-capitalize m-0">
                    {{ item.name }}
                  </p>
                </li>
              </ul>
            </div>
          </div> -->
        </div>
      </div>

      <div class="col-xl-9 col-12 location-section section-width">
        <div class="mt-3 mt-md-5">
          <h3 class="size26 redhat-semibold text-capitalize mb-xl-5 mb-lg-4 mb-md-4 mb-4">
            location
          </h3>
          <p class="size18 redhat-semibold">
            mk ghaninam, warehouse
            <br />
            no.40 3rd al wuar, al a rja industrial area
            <br />
            dubai, united arab emirates
          </p>
          <div class="maps">
            <iframe
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d7220.5634893502!2d55.270783!3d25.2048493!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3e5f43348a67e24b%3A0xff45e502e1ceb7e2!2sBurj%20Khalifa!5e0!3m2!1sen!2sae!4v1620000000000!5m2!1sen!2sae"
              width="100%" height="450" style="border: 0" allowfullscreen="" loading="lazy"
              referrerpolicy="no-referrer-when-downgrade">
            </iframe>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="min-vh-100 collection">
  <div class="container-fluid">
    <h3 class="text-capitalize size60 performa-light">related listings</h3>

    <div class="row">
      <div class="results-section col-xl-12 col-lg-12 col-md-12 col-12" #resultsSection>
        <div class="products">
          <div class="row">
            <div class="col-xl-3 col-lg-4 col-md-6 col-12 mb-xl-5 mb-4" *ngFor="let car of relatedVehicleData" [routerLink]="['/product', car.url_key]"
            routerLinkActive="router-link-active">
              <div class="car-card" >
                <img src="{{ backendURl }}/media/{{ car.media_data[0].src }}" [alt]="car.name"
                  class="img-fluid thumbnail-image w-100 h-100" />
                <div class="card-content">
                  <div class="car-info pb-xl-3 d-flex justify-content-between align-items-center">
                    <div class="car-header">
                      <h4 class="car-name mb-1 size26 redhat-semibold gray-color">
                        {{ car.name }}
                      </h4>
                      <h6 class="transmission text-muted size18 redhat-semibold text-capitalize color-card-p">
                        {{ car.transmission }}
                      </h6>
                    </div>
                    <span *ngIf="car && car.isvipNumberPlate"
                      class="size12 redhat-bold text-capitalize border border-1 rounded-2 px-2 py-1">special number
                      plate</span>
                  </div>

                  <div class="d-flex justify-content-between border-top border-bottom p-md-3 p-2">
                    <div class="text-center">
                      <img src="{{ imageURL }}/home/collection/fuel_icon.png" class="img-fluid collection_image"
                        alt="" />
                      <h6 class="mb-0 mt-md-2 size16 redhat-semibold color-card-p">
                        {{ car.fuelType }}
                      </h6>
                    </div>
                    <div class="text-center">
                      <img src="{{ imageURL }}/home/collection/speed_icon.png" class="img-fluid collection_image"
                        alt="" />
                      <h6 class="mb-0 mt-md-2 size16 redhat-semibold color-card-p">
                        {{ car.mileage }}
                      </h6>
                    </div>
                    <div class="text-center">
                      <img src="{{ imageURL }}/home/collection/seat_icon.png" class="img-fluid collection_image"
                        alt="" />
                      <h6 class="mb-0 mt-md-2 size16 redhat-semibold color-card-p">
                        {{ car.seating_capacity }} Seats
                      </h6>
                    </div>
                  </div>

                  <div class="cash-container mt-2 d-flex justify-content-between align-items-center pt-md-3 pt-2">
                    <div class="cash">
                      <h6 class="text-muted mb-0 size18 redhat-semibold color-card-p text-decoration-line-through">
                        AED {{ car.regularRate }}
                      </h6>
                      <h5 class="mb-0 size26 redhat-semibold gray-color">
                        AED {{ car.dailyRate }}
                      </h5>
                    </div>
                    <a href="/product/{{car.url_key}}"
                      class="p-0 mt-auto text-decoration-none color-card-p size16 redhat-semibold text-capitalize">View
                      details</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>

<app-testimonials></app-testimonials>